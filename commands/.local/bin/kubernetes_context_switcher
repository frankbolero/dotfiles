#!/bin/sh

contexts=$(kubectl config get-contexts -o name)
line_count=$(echo "$contexts" | wc -l | xargs)
display_count=$((line_count + 3))

selected=$(echo "$contexts" | fzf --height="$display_count" --header="Select a Kubernetes context")

if [ -n "$selected" ]; then
  context_name=$(echo "$selected")

  kubectl config use-context "$context_name"

else
  echo "No context selected"
fi
